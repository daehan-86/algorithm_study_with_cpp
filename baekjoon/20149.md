# [[20149] 선분 교차 3 (platinum4)](https://www.acmicpc.net/problem/20149)
## 문제
![image](https://github.com/daehan-86/baekjoon_study_with_cpp/assets/78295295/99c81483-cafe-4797-b571-d1d2ed273b91)

## 입력
![image](https://github.com/daehan-86/baekjoon_study_with_cpp/assets/78295295/03141fbf-5615-4d5a-b240-c3e766ed60d2)

## 출력
![image](https://github.com/daehan-86/baekjoon_study_with_cpp/assets/78295295/24b38a76-1dcb-4211-afc3-87bc60f0ad95)

## 풀이
이 문제 솔직히 머리로 못풀겠다.  
확실히 수학을 잘해야 풀 수 있는 문제다.  
이 문제는 선분이 교차하는지 판별하고 만약 교차한다면 그 교점을 구하는 문제이다.  
교점 구하는 공식  
![image](https://github.com/daehan-86/baekjoon_study_with_cpp/assets/78295295/bec2fef3-81b5-4d79-bd5e-598a17172501)
이 공식을 통해 교점이 있는지 없는지 확인하면 된다.

## 코드
```
#include<iostream>
#define X first
#define Y second
using namespace std;
typedef long long ll;
typedef pair<ll, ll> p;
pair<double,double> crop;
bool state;
void input_crop(p a, p b, p c, p d) {
	state = 1;
	double px = (a.X * b.Y - a.Y * b.X) * (c.X - d.X) - (a.X - b.X) * (c.X * d.Y - c.Y * d.X);
	double py = (a.X * b.Y - a.Y * b.X) * (c.Y - d.Y) - (a.Y - b.Y) * (c.X * d.Y - c.Y * d.X);
	double p = (a.X - b.X) * (c.Y - d.Y) - (a.Y - b.Y) * (c.X - d.X);

	if (p == 0) {
		if (b == c && a <= c) crop = b;
		else if (a == d && c <= a) crop = a;
		else state = 0;
	}
	else {
		crop.X = px / p;
		crop.Y = py / p;
	}
}
int ccw(p a, p b, p c) {
	ll k = (b.X - a.X) * (c.Y - a.Y) - (c.X - a.X) * (b.Y - a.Y);
	if (k > 0)return 1;
	else if (!k) return 0;
	else return -1;
}
bool cross(p a, p b, p c, p d) {
	int A=ccw(a,b,c)*ccw(a,b,d), B=ccw(c,d,a)*ccw(c,d,b);
	if (!A && !B) {
		if (a > b)swap(a, b);
		if (c > d)swap(c, d);
		if (c <= b && a <= d) {
			input_crop(a, b, c, d);
			return 1;
		}
		return 0;
	}
	if (A <= 0 && B <= 0) {
		input_crop(a, b, c, d);
		return 1;
	}
	return 0;
}
int main(void) {
	cin.tie(0);
	ios::sync_with_stdio(0);
	p a, b, c, d;
	cin >> a.X >> a.Y >> b.X >> b.Y >> c.X >> c.Y >> d.X >> d.Y;
	bool cro = cross(a, b, c, d);
	cout << cro << "\n";
	if (cro&&state) {
		cout << fixed;
		cout.precision(9);
		cout << crop.X << " " << crop.Y;
	}
	return 0;
}
```
